<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JayJay Weds Sarki - Luxury Boarding Pass</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&family=Playfair+Display:ital,wght@0,400;0,600;0,700;1,400&display=swap" rel="stylesheet">
    <!-- Barcode Font -->
    <link href="https://fonts.googleapis.com/css2?family=Libre+Barcode+39&display=swap" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- html2canvas -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

    <style>
        body {
            font-family: 'Montserrat', sans-serif;
            background-color: #f3f4f6; /* Light gray page background to contrast the white ticket */
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            padding: 20px;
        }

        .luxury-font {
            font-family: 'Playfair Display', serif;
        }

        /* Fixed dimensions for 208mm x 74mm (approx 786px x 280px @ 96dpi) */
        .ticket-dimensions {
            width: 786px;
            height: 280px;
            min-width: 786px; /* Prevent shrinking */
            min-height: 280px;
        }

        /* Gold Gradient Text */
        .gold-text-gradient {
            background: linear-gradient(to right, #bf953f, #b38728, #aa771c);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        /* Velvet Navy Background */
        .bg-velvet-navy {
            background-color: #0b1c3c;
            background-image: radial-gradient(circle at 50% 0%, #162a52 0%, #0b1c3c 75%);
        }

        /* Dashed Line */
        .tear-off-line {
            border-left: 2px dashed #b38728;
            position: relative;
        }
        
        .tear-off-line::before, .tear-off-line::after {
            content: '';
            position: absolute;
            width: 16px;
            height: 16px;
            background-color: #f3f4f6; /* Matches body background to create notch effect */
            border-radius: 50%;
            left: -9px;
            z-index: 20;
        }
        .tear-off-line::before { top: -8px; }
        .tear-off-line::after { bottom: -8px; }

        .input-animate:focus {
            box-shadow: 0 0 10px rgba(11, 28, 60, 0.2);
            border-color: #0b1c3c;
        }
        
        /* Barcode font style */
        .barcode-font {
            font-family: 'Libre Barcode 39', cursive;
            font-size: 40px;
            line-height: 1;
            color: #555;
        }
    </style>
</head>
<body class="overflow-x-auto">

    <!-- Controls -->
    <div class="w-[786px] mb-6 flex flex-col md:flex-row gap-4 justify-between items-end">
        <div class="w-full md:w-1/2">
            <label class="block text-gray-600 text-xs font-bold mb-2 tracking-widest uppercase" for="passengerNameInput">
                Guest Name
            </label>
            <input 
                type="text" 
                id="passengerNameInput" 
                placeholder="Enter Passenger Name" 
                class="input-animate w-full bg-white border border-gray-300 text-gray-800 text-sm rounded py-2 px-3 focus:outline-none luxury-font"
                value="Guest"
                oninput="updateName(this.value)"
            >
        </div>
        <button onclick="downloadPass()" class="bg-[#0b1c3c] hover:bg-[#162a52] text-white text-xs font-bold py-3 px-6 rounded shadow-lg transition duration-300 uppercase tracking-widest flex items-center gap-2">
            <i class="fa-solid fa-download"></i> Download Ticket (PNG)
        </button>
    </div>

    <!-- The Ticket (Fixed Dimensions: 208mm x 74mm) -->
    <div id="boardingPass" class="ticket-dimensions bg-white rounded-xl shadow-2xl flex overflow-hidden relative">
        
        <!-- Main Section (White Background) -->
        <div class="flex-1 p-5 relative flex flex-col justify-between">
            
            <!-- Header -->
            <div class="flex justify-between items-start border-b border-gray-200 pb-2">
                <div class="flex items-center gap-2">
                    <i class="fa-solid fa-plane-departure text-xl text-[#b38728]"></i>
                    <div>
                        <h1 class="text-xl font-bold luxury-font italic text-[#0b1c3c]">JayJay <span class="text-xs text-gray-400 font-sans">&</span> Sarki</h1>
                        <p class="text-[8px] uppercase tracking-[0.2em] text-gray-400">Wedding Airlines</p>
                    </div>
                </div>
                <div class="text-right">
                    <div class="bg-[#f3f4f6] px-2 py-1 rounded">
                        <span class="block text-[8px] text-gray-500 uppercase font-bold tracking-wider">Class</span>
                        <span class="text-xs font-bold text-[#0b1c3c]">FIRST CLASS</span>
                    </div>
                </div>
            </div>

            <!-- Route & Flight Info -->
            <div class="flex items-center justify-between mt-1">
                <div class="text-center">
                    <span class="text-4xl font-bold text-[#0b1c3c] luxury-font">ABV</span>
                    <span class="block text-[9px] text-gray-400 uppercase tracking-wider">Abuja</span>
                </div>
                
                <div class="flex-1 px-4 flex flex-col items-center">
                    <div class="flex items-center w-full gap-2 opacity-60">
                        <div class="h-[1px] bg-[#b38728] w-full"></div>
                        <i class="fa-solid fa-heart text-[#b38728] text-xs"></i>
                        <div class="h-[1px] bg-[#b38728] w-full"></div>
                    </div>
                    <span class="text-[9px] font-bold text-[#b38728] mt-1 bg-white px-2">FLIGHT JS2026</span>
                </div>

                <div class="text-center">
                    <span class="text-4xl font-bold text-[#0b1c3c] luxury-font">DOH</span>
                    <span class="block text-[9px] text-gray-400 uppercase tracking-wider">Doha</span>
                </div>
            </div>

            <!-- Passenger & Details Grid -->
            <!-- Changed structure to use flex-1 for name and flex-shrink-0 for details -->
            <div class="flex justify-between items-end mt-2">
                <div class="flex-1 min-w-0 mr-4">
                    <p class="text-[9px] text-gray-400 uppercase tracking-widest mb-0.5">Passenger Name</p>
                    <!-- Allowed text to wrap and removed overflow hidden -->
                    <p id="nameDisplayMain" class="text-xl font-bold luxury-font text-[#0b1c3c] leading-tight break-words pb-1">Guest</p>
                </div>

                <div class="flex gap-6 flex-shrink-0">
                    <div>
                        <p class="text-[9px] text-gray-400 uppercase tracking-widest mb-0.5">Date</p>
                        <p class="text-sm font-bold text-[#0b1c3c]">07 FEB 26</p>
                    </div>
                    <div>
                        <p class="text-[9px] text-gray-400 uppercase tracking-widest mb-0.5">Time</p>
                        <p class="text-sm font-bold text-[#0b1c3c]">16:00</p>
                    </div>
                    <div>
                        <p class="text-[9px] text-gray-400 uppercase tracking-widest mb-0.5">Gate</p>
                        <p class="text-sm font-bold text-[#0b1c3c]">LOVE</p>
                    </div>
                    <div>
                        <p class="text-[9px] text-gray-400 uppercase tracking-widest mb-0.5">Seat</p>
                        <p class="text-sm font-bold text-[#0b1c3c]">1A</p>
                    </div>
                </div>
            </div>

            <!-- Bottom Barcode Strip -->
            <!-- Changed from absolute to relative flex container with mt-auto -->
            <div class="flex justify-between items-end opacity-40 mt-auto pt-2">
                 <div class="barcode-font">JAYJAYWEDSSARKI2026</div>
                 <div class="text-[8px] font-mono text-gray-500">ELECTRONIC TICKET AUTHORITY</div>
            </div>
        </div>

        <!-- Stub Section (Velvet Navy Background) -->
        <div class="w-[220px] bg-velvet-navy tear-off-line p-5 flex flex-col justify-between text-white relative">
            
            <!-- Logo/Top -->
            <div class="flex justify-between items-start">
                <div>
                    <h2 class="text-lg luxury-font italic text-[#b38728]">Boarding Pass</h2>
                </div>
                <i class="fa-solid fa-champagne-glasses text-[#b38728] opacity-80"></i>
            </div>

            <!-- Info Stack -->
            <div class="space-y-2 mt-1">
                <div>
                    <p class="text-[8px] text-gray-400 uppercase tracking-wider">Passenger</p>
                    <!-- Removed truncate, added leading-tight and break-words -->
                    <p id="nameDisplayStub" class="text-xs font-bold text-[#f3f4f6] leading-tight break-words">Guest</p>
                </div>
                
                <div class="flex justify-between">
                    <div>
                        <p class="text-[8px] text-gray-400 uppercase tracking-wider">Flight</p>
                        <p class="text-xs font-bold text-[#b38728]">JS2026</p>
                    </div>
                    <div class="text-right">
                        <p class="text-[8px] text-gray-400 uppercase tracking-wider">Seat</p>
                        <p class="text-xl font-bold text-white">1A</p>
                    </div>
                </div>
            </div>

            <!-- QR Code Area -->
            <div class="bg-white p-1.5 rounded self-center mt-2 shadow-lg">
                <img src="https://api.qrserver.com/v1/create-qr-code/?size=80x80&data=JayJayWedsSarki_Wedding_Invite" alt="QR" class="w-[60px] h-[60px] object-contain">
            </div>

        </div>
    </div>

    <script>
        function updateName(name) {
            const displayMain = document.getElementById('nameDisplayMain');
            const displayStub = document.getElementById('nameDisplayStub');
            
            if(name.trim() === "") {
                displayMain.textContent = "Guest";
                displayStub.textContent = "Guest";
            } else {
                displayMain.textContent = name;
                displayStub.textContent = name;
            }
        }

        function downloadPass() {
            const element = document.getElementById('boardingPass');
            const btn = document.querySelector('button');
            const originalText = btn.innerHTML;

            btn.innerHTML = '<i class="fa-solid fa-spinner fa-spin"></i> Processing...';
            
            html2canvas(element, {
                scale: 3, // High resolution for print
                backgroundColor: null,
                useCORS: true,
                // Wait for fonts to load
                onclone: (clonedDoc) => {
                    return new Promise((resolve) => {
                        setTimeout(() => resolve(clonedDoc), 500);
                    });
                }
            }).then(canvas => {
                const link = document.createElement('a');
                link.download = 'JayJay_Weds_Sarki_Invite.png';
                link.href = canvas.toDataURL('image/png');
                link.click();
                btn.innerHTML = originalText;
            }).catch(err => {
                console.error("Error:", err);
                alert("Error generating image.");
                btn.innerHTML = originalText;
            });
        }
    </script>
</body>
</html>
